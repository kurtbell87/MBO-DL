{
  "go_no_go": "CONDITIONAL_GO",
  "go_justification": "Positive out-of-sample R\u00b2 exists: R2 h=1 MLP R\u00b2=0.0067, R3 CNN h=5 R\u00b2=0.132, R4 Static-Book GBT h=1 R\u00b2=0.0046. However, oracle expectancy from Phase 3 C++ backtest is not available in .kit/results/ \u2014 it was a TDD engineering phase with results in C++ test output. Flagged as open question.",
  "bar_type": "time_5s",
  "bar_param": 5,
  "architecture": "cnn_gbt_hybrid",
  "spatial_encoder": {
    "include": true,
    "type": "conv1d",
    "embedding_dim": 16,
    "input_shape": [
      20,
      2
    ],
    "justification": "R3 CNN R\u00b2=0.132 vs Attention R\u00b2=0.085 (corrected p=0.042, Cohen's d=1.86). CNN 16-dim embedding linear probe R\u00b2=0.111 vs raw 40-dim R\u00b2=0.027 (retention ratio=4.16x, p=0.012). CNN amplifies spatial book structure."
  },
  "message_encoder": {
    "include": false,
    "justification": "R2 \u0394_msg_learned < 0 at all horizons. Book is sufficient statistic for messages."
  },
  "temporal_encoder": {
    "include": false,
    "justification": "R2 \u0394_temporal = \u22120.006. R4 confirms: 0/52 temporal tests pass. Returns are martingale at 5s bars."
  },
  "features": {
    "source": "cnn_16d_plus_non_spatial",
    "cnn_embedding_dim": 16,
    "non_spatial_dim": 20,
    "total_dim": 36,
    "preprocessing": "z-score per day, warmup=50 bars",
    "cnn_input": "raw book snapshot (20 levels x 2 sides) = (20, 2)",
    "non_spatial_features": [
      "trade_imbalance",
      "trade_flow",
      "vwap_distance",
      "close_position",
      "return_1",
      "return_5",
      "return_20",
      "volatility_20",
      "volatility_50",
      "high_low_range_50",
      "cancel_add_ratio",
      "message_rate",
      "modify_fraction",
      "time_sin",
      "time_cos",
      "minutes_since_open",
      "minutes_to_close",
      "is_afternoon",
      "is_close",
      "bar_volume"
    ]
  },
  "prediction_horizons": [
    1,
    5
  ],
  "horizon_note": "R2 and R4 agree that h=1 is the only horizon with positive R\u00b2 from static features. R3 tested h=5 only and found R\u00b2=0.132 with CNN. The discrepancy is explained by R3's CNN extracting spatial patterns invisible to R2's flattened MLP. Both horizons should be tested in the model build: h=1 for static features, h=5 for CNN embeddings.",
  "labeling": {
    "method": "open_question",
    "note": "Phase 3 oracle_labeler implements first-to-hit labeling (target_ticks=10, stop_ticks=5, take_profit_ticks=20). Phase 3 was a TDD engineering phase; oracle expectancy results are in C++ test output, not .kit/results/. Flagged as open question.",
    "params": {
      "target_ticks": 10,
      "stop_ticks": 5,
      "horizon": 100
    }
  },
  "limitations": [
    "single_year_2022",
    "r3_only_tested_h5",
    "power_floor_r2_0.003",
    "no_regime_conditioning",
    "failed_corrections",
    "r3_fold_variance"
  ],
  "reconciliation": {
    "r2_mlp_return5_r2": -0.000173,
    "r3_cnn_return5_r2": 0.131692,
    "ratio": 762.4,
    "same_days": true,
    "same_cv": true,
    "r2_input_format": "flattened 40-dim vector",
    "r3_input_format": "structured (20, 2) price-ladder",
    "r2_model": "MLP (2x64, ~5k params)",
    "r3_model": "Conv1d (~12k params)",
    "attribution": [
      "Structured (20,2) input preserves spatial adjacency \u2014 dominant factor",
      "Conv1d inductive bias captures adjacent-level correlations",
      "Modest capacity difference (12k vs 5k params) \u2014 secondary factor",
      "No data split artifact \u2014 same 19 days, same CV strategy"
    ],
    "conclusion": "The 20x R\u00b2 difference is primarily architectural, not a data artifact. R2's MLP on flattened book destroyed spatial structure that the CNN exploits. R3's CNN result is genuine signal extraction, not overfitting \u2014 it achieves R\u00b2=0.132 consistently across 5 folds (min=0.049, max=0.180)."
  }
}